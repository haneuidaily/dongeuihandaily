<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>æ°£è±¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    .section { margin-bottom: 20px; }
    label { display: block; font-weight: bold; margin-bottom: 6px; }
    input, select {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    input[type="range"] { height: 10px; }
    .range-wrapper { position: relative; }
    .range-labels-absolute {
      position: absolute;
      top: 30px;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: space-between;
      font-size: 0.85em;
    }
    .range-labels-absolute span {
      transform: translateX(-50%);
      width: 20px;
      text-align: center;
    }
    .btn {
      padding: 15px 30px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      display: block;
      margin: 30px auto;
    }
    .output {
      margin-top: 20px;
      padding: 12px;
      background: #f2f2f2;
      border-radius: 8px;
    }
    #mainPage, #reportPage { display: none; }
  </style>
</head>
<body>


  <div style="text-align: center; margin-bottom: 30px;">
    <h1 style="font-size: 2.5em; margin: 0;">æ°£è±¡</h1>
    <div style="font-size: 1.1em; color: #555;">í•œì˜ ë°ì¼ë¦¬ ë¦¬í¬íŠ¸</div>
  </div>
<div id="introPage">
  <h2>ğŸ‘¤ ê¸°ë³¸ ì •ë³´ ì…ë ¥</h2>
  <div class="section"><label>ì´ë¦„<input type="text" id="name" /></label></div>
  <div class="section"><label>ë‚˜ì´<input type="number" id="age" /></label></div>
  <div class="section"><label>ì„±ë³„<select id="gender"><option>ë‚¨</option><option>ì—¬</option></select></label></div>
  <div class="section"><label>í‚¤ (cm)<input type="number" id="height" /></label></div>
  <div class="section"><label>ëª¸ë¬´ê²Œ (kg)<input type="number" id="weight" /></label></div>
  <button class="btn" onclick="goToMainPage()">ì…ë ¥ ì™„ë£Œ</button>
</div>

<div id="mainPage">
  <h2>ğŸ“‹ ê±´ê°• ì •ë³´ ì…ë ¥</h2>
  <form id="healthForm">
    <div class="section"><label>ëŒ€ë³€ ë¹ˆë„</label>
      <div class="range-wrapper"><input type="range" name="bowel_freq" min="0" max="3" value="1">
      <div class="range-labels-absolute"><span>0</span><span>1</span><span>2</span><span>3</span></div></div></div>
    <div class="section"><label>ëŒ€ë³€ ì‹œì›í•¨</label>
      <div class="range-wrapper"><input type="range" name="bowel_satisfaction" min="1" max="5" value="3">
      <div class="range-labels-absolute"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div></div></div>
    <div class="section"><label>ì†Œë³€ ë¹ˆë„</label>
      <div class="range-wrapper"><input type="range" name="urine_freq" min="1" max="10" value="5">
      <div class="range-labels-absolute"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span></div></div></div>
    <div class="section"><label>ìˆ˜ë©´ ì‹œê°„</label>
      <div class="range-wrapper"><input type="range" name="sleep_time" min="0" max="12" value="6">
      <div class="range-labels-absolute"><span>0</span><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span></div></div></div>
    <div class="section"><label>ìˆ˜ë©´ì˜ ì§ˆ</label>
      <div class="range-wrapper"><input type="range" name="sleep_quality" min="1" max="5" value="3">
      <div class="range-labels-absolute"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div></div></div>
    <div class="section"><label>ì‹ì‚¬ëŸ‰</label>
      <div class="range-wrapper"><input type="range" name="meal_amount" min="1" max="5" value="3">
      <div class="range-labels-absolute"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div></div></div>
    <div class="section"><label>ì‹í›„ ë¶ˆí¸ê°</label>
      <div class="range-wrapper"><input type="range" name="digest_discomfort" min="1" max="5" value="2">
      <div class="range-labels-absolute"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div></div></div>
    <div class="section"><label>ê°ì • ìƒíƒœ</label>
      <div class="range-wrapper"><input type="range" name="emotion" min="1" max="5" value="3">
      <div class="range-labels-absolute"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span></div></div></div>
    <button type="button" class="btn" onclick="generateReport()">ë¦¬í¬íŠ¸ ìƒì„±</button>
  </form>
</div>

<div id="reportPage">
  <h2>ğŸ“Š ë¶„ì„ ê²°ê³¼</h2>
  <div id="userInfo" class="output"></div>
  <div id="report" class="output"></div>
  <div id="guide" class="output"></div>
  <canvas id="scoreChart" width="600" height="300"></canvas>
</div>

<script>
let userData = {};

document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("introPage").style.display = "block";
});

function goToMainPage() {
  userData.name = document.getElementById("name").value;
  userData.age = document.getElementById("age").value;
  userData.gender = document.getElementById("gender").value;
  userData.height = document.getElementById("height").value;
  userData.weight = document.getElementById("weight").value;
  document.getElementById("introPage").style.display = "none";
  document.getElementById("mainPage").style.display = "block";
}

function generateReport() {
  const f = document.forms["healthForm"];
  const scores = { ê¸°ì²´: 0, í˜ˆí—ˆ: 0, ìŒí—ˆ: 0, ì‹ì : 0, ê°„ê¸°ìš¸ê²°: 0 };

  
  console.log("ìŠ¬ë¼ì´ë” ì…ë ¥ê°’ í™•ì¸:", {
    bowel_freq: f["bowel_freq"].value,
    bowel_satisfaction: f["bowel_satisfaction"].value,
    urine_freq: f["urine_freq"].value,
    sleep_time: f["sleep_time"].value,
    sleep_quality: f["sleep_quality"].value,
    meal_amount: f["meal_amount"].value,
    digest_discomfort: f["digest_discomfort"].value,
    emotion: f["emotion"].value
  });
const d = {
    bowel_freq: parseInt(f["bowel_freq"].value),
    bowel_satisfaction: parseInt(f["bowel_satisfaction"].value),
    urine_freq: parseInt(f["urine_freq"].value),
    sleep_time: parseInt(f["sleep_time"].value),
    sleep_quality: parseInt(f["sleep_quality"].value),
    meal_amount: parseInt(f["meal_amount"].value),
    digest_discomfort: parseInt(f["digest_discomfort"].value),
    emotion: parseInt(f["emotion"].value)
  };

  if (d.bowel_freq < 1 || d.bowel_satisfaction < 3) scores["ê¸°ì²´"] += 2;
  if (d.digest_discomfort >= 4) scores["ì‹ì "] += 2;
  if (d.urine_freq > 8) scores["ìŒí—ˆ"] += 2;
  if (d.sleep_time < 5 || d.sleep_quality <= 2) scores["í˜ˆí—ˆ"] += 2;
  if (d.emotion <= 2) scores["ê°„ê¸°ìš¸ê²°"] += 2;

  document.getElementById("mainPage").style.display = "none";
  document.getElementById("reportPage").style.display = "block";

  const info = `
    <h3>ğŸ‘¤ ì‚¬ìš©ì ì •ë³´</h3>
    <ul>
      <li>ì´ë¦„: ${userData.name}</li>
      <li>ë‚˜ì´: ${userData.age}</li>
      <li>ì„±ë³„: ${userData.gender}</li>
      <li>í‚¤: ${userData.height} cm</li>
      <li>ëª¸ë¬´ê²Œ: ${userData.weight} kg</li>
    </ul>`;
  document.getElementById("userInfo").innerHTML = info;

  let result = "<h3>ì²´ì§ˆ ì ìˆ˜</h3><ul>";
  for (let k in scores) {
    result += `<li><strong>${k}</strong>: ${scores[k]}ì </li>`;
  }
  result += "</ul>";
  document.getElementById("report").innerHTML = result;

  let guide = "<h3>ğŸ§­ ìƒí™œ ê°€ì´ë“œ</h3><ul>";
  if (scores["ê¸°ì²´"] >= 2) guide += "<li>ì‚°ì±…, ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ê¸° ìˆœí™˜ì„ ë•ê¸°</li>";
  if (scores["í˜ˆí—ˆ"] >= 2) guide += "<li>ìˆ˜ë©´ í™•ë³´ì™€ ì² ë¶„ ì‹ë‹¨ ì„­ì·¨</li>";
  if (scores["ìŒí—ˆ"] >= 2) guide += "<li>ìˆ˜ë¶„ ë³´ì¶©, ì•¼ê°„ í™œë™ ìì œ</li>";
  if (scores["ì‹ì "] >= 2) guide += "<li>ì†Œì‹, ìê·¹ì  ìŒì‹ ì¤„ì´ê¸°</li>";
  if (scores["ê°„ê¸°ìš¸ê²°"] >= 2) guide += "<li>ëª…ìƒ, ê°ì • í•´ì†Œ í™œë™í•˜ê¸°</li>";
  guide += "</ul>";
  document.getElementById("guide").innerHTML = guide;

  if (window.myChart) window.myChart.destroy();
  const ctx = document.getElementById("scoreChart").getContext("2d");
  window.myChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Object.keys(scores),
      datasets: [{
        label: 'ì²´ì§ˆ ì ìˆ˜',
        data: Object.values(scores),
        backgroundColor: 'rgba(75, 192, 192, 0.6)'
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          max: 5
        }
      }
    }
  });
}
</script>
</body>
</html>